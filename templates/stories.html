{{ define "content" }}
<div class="stories-container">
    {{ range .Stories }}
    <article class="story-item" id="story-{{.ID}}">
        <div class="story-meta">
            <span class="story-rank">{{.Rank}}.</span>
            <button 
                class="vote-button {{ if .Voted }}voted{{ end }}"
                hx-post="/vote"
                hx-vals='{"id": {{.ID}}, "type": "up"}'
                hx-swap="outerHTML"
                {{ if not $.LoggedIn }}disabled{{ end }}
            >
                â–²
            </button>
        </div>
        <div class="story-content">
            <div class="story-title-line">
                <a href="{{.URL}}" class="story-title" target="_blank">{{.Title}}</a>
                {{ if .Domain }}
                <span class="story-domain">({{.Domain}})</span>
                {{ end }}
            </div>
            <div class="story-details">
                <span class="story-score">{{.Score}} points</span>
                <span class="story-author">by <a href="/user/{{.By}}">{{.By}}</a></span>
                <span class="story-time">{{.TimeAgo}}</span>
                <span class="story-comments">
                    <a href="/item/{{.ID}}">{{.Descendants}} comments</a>
                </span>
                {{ if $.LoggedIn }}
                <span class="story-actions">
                    <a href="#" hx-post="/flag" hx-vals='{"id": {{.ID}}}' class="action-link">flag</a>
                    <span>|</span>
                    <a href="#" hx-post="/hide" hx-vals='{"id": {{.ID}}}' class="action-link">hide</a>
                    <span>|</span>
                    <a href="/item/{{.ID}}" class="action-link">discuss</a>
                </span>
                {{ end }}
            </div>
        </div>
    </article>
    {{ end }}
    
    <div class="pagination">
        {{ if .HasMore }}
        <a href="?p={{.NextPage}}" 
           class="more-link"
           hx-get="?p={{.NextPage}}"
           hx-target=".stories-container"
           hx-swap="beforeend"
           hx-trigger="revealed"
        >
            More
        </a>
        {{ end }}
    </div>
</div>
{{ end }} 